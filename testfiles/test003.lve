\documentclass{article} 
\usepackage[T1]{fontenc}
\input{regression-test} 
\usepackage{jsonparse} 

\begin{document}

\ExplSyntaxOn
\box_new:N \l_jsonparse_test_box
\ExplSyntaxOff

\JSONParse{\JSONdataC}{
  {
    "data" : [ 
       { "x" : 1 , "y" : 2 } ,
       { "x" : 2 , "y" : 4 } ,
       { "x" : 3 , "y" : 5 } ,
       { "x" : 4 , "y" : 8 }  
    ] , 

    "items" : [ "a" , "b" , "c" , "d" ]
  }
}

\START

\BEGINTEST{arrays: array count}

  \TRUE

\ENDTEST


\BEGINTEST{arrays: array use}

\ExplSyntaxOn

  \hbox_set:Nn \l_jsonparse_test_box { 2 , ~ 4 , ~ 5 , ~ 8 }
  \box_show:N \l_jsonparse_test_box

  \hbox_set:Nn \l_jsonparse_test_box { a , ~ b , ~ c , ~ d }
  \box_show:N \l_jsonparse_test_box

\ExplSyntaxOff

\ENDTEST


\BEGINTEST{arrays: array map function}

\ExplSyntaxOn

  \hbox_set:Nn \l_jsonparse_test_box { ~
    0 : ~ [0].y : ~ 2 ~
    1 : ~ [1].y : ~ 4 ~
    2 : ~ [2].y : ~ 5 ~
    3 : ~ [3].y : ~ 8 
  }
  \box_show:N \l_jsonparse_test_box

  \hbox_set:Nn \l_jsonparse_test_box { ~
    0 : ~ [0].y : ~ 2 ~
    1 : ~ [1].y : ~ 4 ~
    2 : ~ [2].y : ~ 5 ~
    3 : ~ [3].y : ~ 8 
  }
  \box_show:N \l_jsonparse_test_box

\ExplSyntaxOff

\ENDTEST


\BEGINTEST{arrays: array map inline}

\ExplSyntaxOn

  \hbox_set:Nn \l_jsonparse_test_box { 
    1 : 2 : 3 : 4 :
  }
  \box_show:N \l_jsonparse_test_box

\ExplSyntaxOff

\ENDTEST

\END

\end{document}
